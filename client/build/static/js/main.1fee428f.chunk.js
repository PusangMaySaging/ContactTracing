(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),c=a(29),r=a.n(c),i=a(3),l=(a(85),a.p+"static/media/mobile.41ed055e.svg"),o=a.p+"static/media/Reading.1c6d3bd8.svg",j=a(15),u=a(1);var d=function(e){var t=Object(n.useState)(!0),a=Object(i.a)(t,2),s=a[0],c=a[1];return Object(n.useEffect)((function(){function e(){window.innerWidth>=810?c(!1):c(!0)}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{className:"home-header",children:Object(u.jsx)("span",{className:"blue-clr",children:"Campus"})}),Object(u.jsxs)("div",{className:"home",children:[Object(u.jsx)("div",{className:"section-1",children:Object(u.jsxs)("div",{className:"section-wrapper",children:[Object(u.jsxs)("div",{className:"home-texts",children:[Object(u.jsx)("div",{className:"home-title",children:Object(u.jsx)("span",{className:"yl-clr",children:"Welcome! Student"})}),Object(u.jsx)("div",{className:"home-subtitle",children:Object(u.jsx)("span",{className:"blue-clr",children:"You can now easily access school facilities using this web application. We monitor your movement in school campus to make sure you are safe and informed."})})]}),Object(u.jsxs)("div",{className:"CTA",children:[Object(u.jsx)(j.b,{to:"/signin",className:"blue-bg default-clr",children:"Sign In "}),Object(u.jsx)(j.b,{to:"signup",className:"cta-border blue-clr",children:"Sign Up"})]})]})}),Object(u.jsx)("div",{className:"section-2",children:s&&window.innerWidth<810?Object(u.jsx)("img",{src:l,alt:"background"}):Object(u.jsx)("img",{src:o,alt:"person",className:"illustration"})})]})]})},b=a(4),p=a.n(b),m=a(8),O=a(14),h=a(9),f=(a(47),a(13)),x=a(7),g=a.n(x),v={domain:"https://campus-contact-tracing.herokuapp.com"},N=Object(n.createContext)(),w=function(e){var t=Object(n.useState)(!0),a=Object(i.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(1),l=Object(i.a)(r,2),o=l[0],j=l[1];return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(v.domain,"/Auth"),{withCredentials:!0});case 2:t=e.sent,a=t.data,localStorage.setItem("auth",JSON.stringify(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),c(!1)}),[o]),Object(u.jsx)(N.Provider,{value:[o,j],children:s?Object(u.jsx)(u.Fragment,{}):e.children})};var y=function(e){var t=e.setLoadingClass,a=Object(n.useState)({}),s=Object(i.a)(a,2),c=s[0],r=s[1],l=Object(n.useContext)(N),o=Object(i.a)(l,2),d=(o[0],o[1]),b=Object(n.useRef)();function x(e){var t=e.target,a=t.name,n=t.value;r((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},a,n))}))}function w(){return(w=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t("loading-wrapper"),e.next=4,g.a.post("".concat(v.domain,"/signin"),c,{headers:{"Content-Type":"application/json"},withCredentials:!0});case 4:"OK"===e.sent.data.message?(t("hide"),localStorage.setItem("auth",JSON.stringify({bool:!0,role:"Client"})),d((function(e){return e+1}))):(t("hide"),b.current.style.display="inline"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t("hide"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return JSON.parse(localStorage.getItem("auth")).bool||"Client"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsx)(f.a,{to:"/dashboard"}):Object(u.jsx)("div",{className:"sign-in",children:Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsx)("div",{className:"form-title",children:Object(u.jsx)("span",{children:"Sign In"})}),Object(u.jsxs)("form",{className:"form-form",children:[Object(u.jsx)("span",{className:"error-message warn",ref:b,children:"Invalid Username or Password"}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Email or Mobile Number"}),Object(u.jsx)("input",{type:"email",name:"username",className:"input signin-input bg1",onChange:x,required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",className:"input signin-input bg1",onChange:x,required:!0})]}),Object(u.jsx)("div",{className:"no-account",children:Object(u.jsx)(j.b,{to:"/signup",children:"Don't have an account? Sign Up"})}),Object(u.jsx)("div",{className:"btn-wrapper",children:Object(u.jsx)("button",{type:"button",onClick:function(){return w.apply(this,arguments)},className:"btn signin-btn blue-bg default-clr",children:"Sign In"})})]})]})})};var C=function(e){var t=e.handleFormData,a=e.incrementSteps,s=e.showValid,c=e.showInvalid,r=Object(n.useState)({email:!1,password:!1,confirmPassword:!1}),l=Object(i.a)(r,2),o=l[0],d=l[1],b=Object(n.useRef)(),O=Object(n.useRef)(),f=Object(n.useRef)(),x=Object(n.useRef)(),N=Object(n.useRef)();function w(){return(w=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},a=t.target.value,s(t,f),!n(a)){e.next=12;break}return s(t,O),d((function(e){return Object(h.a)(Object(h.a)({},e),{},{email:!0})})),e.next=8,g.a.post("".concat(v.domain,"/validateEmailIfTaken"),{email:a});case 8:e.sent.data&&(c(t,f),d((function(e){return Object(h.a)(Object(h.a)({},e),{},{email:!1})}))),e.next=14;break;case 12:c(t,O),d((function(e){return Object(h.a)(Object(h.a)({},e),{},{email:!1})}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"sign-up",children:[Object(u.jsxs)("ol",{className:"steps",children:[Object(u.jsx)("li",{className:"stepOne blue-bg default-clr active",children:"1. Account"}),Object(u.jsx)("li",{className:"stepTwo",children:"2. Information"}),Object(u.jsx)("li",{className:"stepThree",children:"3. Confirmation"})]}),Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsx)("div",{className:"form-title",children:Object(u.jsx)("span",{children:"Let's setup your user account details"})}),Object(u.jsxs)("form",{className:"form-form",children:[Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Email"}),Object(u.jsx)("input",{type:"email",onChange:t,onInput:function(e){return w.apply(this,arguments)},className:"input signin-input bg1",name:"email",required:!0}),Object(u.jsx)("span",{className:"error-message",ref:f,children:"Email already taken"}),Object(u.jsx)("span",{className:"error-message",ref:O,children:"Invalid email address"})]}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Password"}),Object(u.jsx)("input",{type:"password",onChange:t,onInput:function(e){e.target.value.length>=8?(s(e,x),d((function(e){return Object(h.a)(Object(h.a)({},e),{},{password:!0})}))):(c(e,x),d((function(e){return Object(h.a)(Object(h.a)({},e),{},{password:!1})})))},ref:N,className:"input signin-input  bg1",name:"password",required:!0}),Object(u.jsx)("span",{className:"error-message",ref:x,children:"Password must be atleast 8 characters"})]}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Confirm password"}),Object(u.jsx)("input",{type:"password",onInput:function(e){var t=e.target,a=[t,N.current];N.current.value===t.value?(s(a,b),d((function(e){return Object(h.a)(Object(h.a)({},e),{},{confirmPassword:!0})}))):(c(a,b),d((function(e){return Object(h.a)(Object(h.a)({},e),{},{confirmPassword:!1})})))},className:"input signin-input bg1",name:"confirmPassword",required:!0}),Object(u.jsx)("span",{className:"error-message",ref:b,children:"Passwords did not match"})]}),Object(u.jsx)("div",{className:"have-account",children:Object(u.jsx)(j.b,{to:"/signin",children:"Already have an account? Sign In"})}),Object(u.jsx)("div",{className:"btn-wrapper",children:Object(u.jsx)("button",{type:"submit",className:"btn blue-bg default-clr",onClick:function(e){e.preventDefault(),o.email&&o.password&&o.confirmPassword&&a()},children:"Next"})})]})]})]})})};var S=function(e){var t=e.handleFormData,a=e.formData,s=e.incrementSteps,c=e.showValid,r=e.showInvalid,l=e.setLoadingClass,o=Object(n.useRef)(),j=Object(n.useRef)(),d=Object(n.useState)(!1),b=Object(i.a)(d,2),O=b[0],h=b[1],f=Object(n.useState)([]),x=Object(i.a)(f,2),N=x[0],w=x[1],y=Object(n.useState)([]),C=Object(i.a)(y,2),S=C[0],k=C[1];function I(){return(I=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,"^(09|\\+639)\\d{9}$",c(t,j),!a.match("^(09|\\+639)\\d{9}$")){e.next=12;break}return c(t,o),h(!0),e.next=8,g.a.post("".concat(v.domain,"/validateMobileNumberIfTaken"),{mobileNumber:a});case 8:e.sent.data&&r(t,j),e.next=15;break;case 12:r(t,o),h(!1),t.target.value.length>11&&(n=t.target.value.substring(0,11),t.target.value=n,h(!0),r(t,o));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(O&&F(a.fullname)&&F(a.province)&&F(a.city)&&F(a.fullAddress))){e.next=8;break}return l("loading-wrapper"),e.next=5,g.a.post("".concat(v.domain,"/createVerification"),{mobileNumber:a.mobileNumber});case 5:n=e.sent,"OK"===n.data&&(l("hide"),s());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return e.length>0}return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(v.domain,"/philippines/provinces"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){w(e.data)}))}),[]),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"sign-up form-height",children:[Object(u.jsxs)("ol",{className:"steps",children:[Object(u.jsx)("li",{className:"stepOne",children:"1. Account"}),Object(u.jsx)("li",{className:"stepTwo blue-bg default-clr active",children:"2. Information"}),Object(u.jsx)("li",{className:"stepThree",children:"3. Confirmation"})]}),Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsx)("div",{className:"form-title",children:Object(u.jsx)("span",{children:"Setup Personal Information"})}),Object(u.jsxs)("form",{className:"form-form",children:[Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Fullname"}),Object(u.jsx)("input",{type:"name",onChange:t,className:"input signin-input bg1",name:"fullname",required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Mobile number"}),Object(u.jsx)("input",{type:"number",className:"input bg1",onInput:function(e){return I.apply(this,arguments)},onChange:t,name:"mobileNumber",placeholder:"09XX XXX XXXX"}),Object(u.jsx)("span",{className:"error-message",ref:j,children:"Mobile Number already taken"}),Object(u.jsx)("span",{className:"error-message",ref:o,children:"Invalid mobile number"})]}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Province"}),Object(u.jsxs)("select",{className:"bg1",onChange:function(e){var a=e.target.value;function n(){return(n=Object(m.a)(p.a.mark((function n(){var s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.get("".concat(v.domain,"/philippines/provinces/cities/").concat(a));case 2:s=n.sent,k(s.data),t(e);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()},name:"province",children:[Object(u.jsx)("option",{value:"",children:"Select Province"}),N.map((function(e){return Object(u.jsx)("option",{value:e.name,children:e.name},e.key)}))]})]}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"City"}),Object(u.jsxs)("select",{className:"bg1",onChange:t,name:"city",children:[Object(u.jsx)("option",{value:"",children:"Select City"}),S.map((function(e,t){return Object(u.jsx)("option",{value:e.name+" City",children:e.name+" City"},t)}))]})]}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Detailed address"}),Object(u.jsx)("textarea",{className:"bg1",onChange:t,name:"fullAddress"})]}),Object(u.jsx)("div",{className:"btn-wrapper",children:Object(u.jsx)("button",{type:"submit",className:"btn blue-bg default-clr",onClick:function(e){return P.apply(this,arguments)},children:"Next"})}),Object(u.jsx)("div",{className:"btn-wrapper"})]})]})]})})};var k=function(e){var t=e.formData,a=e.showValid,s=e.incrementSteps,c=e.setLoadingClass,r=Object(n.useState)(),l=Object(i.a)(r,2),o=l[0],j=l[1],d=Object(n.useRef)(),b=Object(n.useRef)();return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"sign-up",children:[Object(u.jsxs)("ol",{className:"steps",children:[Object(u.jsx)("li",{className:"stepOne",children:"1. Account"}),Object(u.jsx)("li",{className:"stepTwo",children:"2. Information"}),Object(u.jsx)("li",{className:"stepThree blue-bg default-clr active",children:"3. Confirmation"})]}),Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsx)("div",{className:"form-title",children:Object(u.jsx)("span",{children:"Please enter 6-digit code we have sent to your mobile number."})}),Object(u.jsxs)("form",{className:"form-form",children:[Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"6 - Digit Code"}),Object(u.jsx)("input",{type:"number",ref:b,className:"input signin-input input-code bg1",onChange:function(e){j(e.target.value),a(e,d)},name:"code",onInput:function(e){var t=e.target;t.value.length>6&&(t.value=t.value.substring(0,6))},required:!0}),Object(u.jsx)("span",{className:"error-message",ref:d,children:"You entered a wrong code"})]}),Object(u.jsx)("div",{className:"btn-wrapper",children:Object(u.jsx)("button",{type:"submit",className:"btn blue-bg default-clr",onClick:function(e){e.preventDefault(),c("loading-wrapper"),g.a.post("".concat(v.domain,"/verify"),{code:o,mobileNumber:t.mobileNumber}).then((function(e){"VERIFIED"===e.data?g.a.post("".concat(v.domain,"/signup"),t).then((function(e){c("hide"),s()})):(c("hide"),function(e,t){var a={OUTLINE:"2px solid #db5248",DISPLAY:"inline"};Array.isArray(e)?e.forEach((function(e){e.style.outline=a.OUTLINE})):e.style.outline=a.OUTLINE;t.current.style.display=a.DISPLAY}(b.current,d))}))},children:"Confirm"})})]})]})]})})};var I=function(e){var t=e.setLoadingClass,a=Object(n.useState)(1),s=Object(i.a)(a,2),c=s[0],r=s[1],l=Object(n.useState)(),o=Object(i.a)(l,2),j=o[0],d=o[1];function b(e,t){var a="2px solid #6BD382",n="NONE";Array.isArray(e)?e.forEach((function(e){e.style.outline=a})):e.target.style.outline=a,t.current.style.display=n}function p(e,t){var a="2px solid #db5248",n="inline";Array.isArray(e)?e.forEach((function(e){e.style.outline=a})):e.target.style.outline=a,t.current.style.display=n}function m(){r((function(e){return e+1}))}function x(e){var t=e.target,a=t.name,n=t.value;d((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},a,n))}))}switch(c){case 1:return Object(u.jsx)(C,{handleFormData:x,showValid:b,showInvalid:p,incrementSteps:m});case 2:return Object(u.jsx)(S,{setLoadingClass:t,handleFormData:x,showValid:b,showInvalid:p,incrementSteps:m,formData:j,children:" "});case 3:return Object(u.jsx)(k,{setLoadingClass:t,formData:j,showValid:b,incrementSteps:m});default:return Object(u.jsx)(f.a,{to:"/signin"})}},P=a(76),F=a.n(P),R=a.p+"static/media/social_distance.2b4f227f.svg",L=Object(n.createContext)(),E=function(e){var t=Object(n.useState)(!0),a=Object(i.a)(t,2),s=a[0],c=a[1],r=Object(n.useContext)(N),l=Object(i.a)(r,2),o=l[0],j=(l[1],Object(n.useState)({name:" ",qrCode:" ",fullAddress:" "})),d=Object(i.a)(j,2),b=d[0],O=d[1];return Object(n.useEffect)((function(){var e=!0;function t(){return(t=Object(m.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.post("".concat(v.domain,"/user"),{},{withCredentials:!0});case 2:a=t.sent,n=a.data,localStorage.setItem("userId",JSON.stringify({id:n.id})),e&&O(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),c(!1),function(){e=!1}}),[o]),Object(u.jsx)(L.Provider,{value:[b,O],children:s?Object(u.jsx)(u.Fragment,{}):e.children})},A=Object(n.createContext)(),J=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),s=a[0],c=a[1];return Object(u.jsx)(A.Provider,{value:[s,c],children:e.children})},D=Object(n.createContext)(),q=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),s=a[0],c=a[1];return Object(u.jsx)(D.Provider,{value:[s,c],children:e.children})};var T=function(e){var t=e.setLoadingClass,a=Object(n.useContext)(L),s=Object(i.a)(a,2),c=s[0],r=(s[1],Object(n.useContext)(N)),l=Object(i.a)(r,2),o=(l[0],l[1]),j=Object(n.useContext)(A),d=Object(i.a)(j,2),b=d[0],O=d[1],h=Object(n.useContext)(D),x=Object(i.a)(h,2),w=x[0],y=x[1];function C(){return(C=Object(m.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("loading-wrapper"),e.prev=1,e.next=4,g.a.post("".concat(v.domain,"/client/generateQR"),{id:c.id},{withCredentials:!0});case 4:a=e.sent,n=a.data,t("hide"),"OK"===n&&o((function(e){return e+1})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return b?Object(u.jsx)(f.a,{to:"/dashboard/logs"}):w?Object(u.jsx)(f.a,{to:"/dashboard/profile"}):JSON.parse(localStorage.getItem("auth")).bool&&"Client"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsxs)("div",{className:"dashboard",children:[Object(u.jsxs)("div",{className:"hero",children:[Object(u.jsx)("div",{className:"hero-text",children:Object(u.jsxs)("span",{className:"text",children:["Welcome ",Object(u.jsx)("br",{}),c.name]})}),Object(u.jsx)("div",{className:"hero-image",children:Object(u.jsx)("img",{src:R,alt:"social_distance"})})]}),Object(u.jsxs)("div",{className:"db-menu",children:[Object(u.jsx)("div",{className:"menu-selection bg1",onClick:function(){O(!0)},children:Object(u.jsx)("span",{children:"View Travel logs"})}),Object(u.jsx)("div",{className:"menu-selection bg1",onClick:function(){y(!0)},children:Object(u.jsx)("span",{children:"My Profile"})})]}),Object(u.jsxs)("div",{className:"qr",children:[Object(u.jsx)("span",{className:"title",children:"Scan Here"}),Object(u.jsx)("div",{className:"qr-code",children:Object(u.jsx)(F.a,{value:c.qrCode,size:190})}),Object(u.jsxs)("div",{className:"desc-wrapper",children:[" ",Object(u.jsx)("span",{className:"desc-text ",children:"You can screenshot the QR code if you are going out without internet connection. Just make sure you won\u2019t share it with others."})]}),Object(u.jsx)("div",{className:"generate",children:Object(u.jsx)("button",{type:"button",onClick:function(){return C.apply(this,arguments)},className:"generate-btn blue-bg default-clr btn",children:"Generate New QR Code"})})]}),Object(u.jsx)("div",{className:"create-org"})]}):Object(u.jsx)(f.a,{to:"/"})},M=a(77),V=a.n(M);var z=function(e){var t=e.setLoadingClass,a=Object(n.useState)(!1),s=Object(i.a)(a,2),c=s[0],r=s[1],l=Object(n.useContext)(N),o=Object(i.a)(l,2),j=o[0],d=(o[1],Object(n.useState)("environment")),b=Object(i.a)(d,2),O=b[0],h=b[1],x=Object(n.useState)({room:"NONE"}),w=Object(i.a)(x,2),y=w[0],C=w[1],S=Object(n.useRef)();function k(){return(k=Object(m.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.current.innerText="QR CODE SUCCESSFULLY SCANNED",t("loading-wrapper"),e.next=4,g.a.post("".concat(v.domain,"/room/createlog"),{qrCode:a,location:y.room});case 4:n=e.sent,"OK"===n.data&&(t("hide"),setTimeout((function(){"/org/Scanner"===window.location.pathname&&(r(!1),S.current.innerText="Ready to Scan Again")}),3e3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){h(e.target.value)}return Object(n.useEffect)((function(){var e=!1;function t(){return(t=Object(m.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.post("".concat(v.domain,"/user"),{},{withCredentials:!0});case 3:a=t.sent,n=a.data,e||C(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[j]),JSON.parse(localStorage.getItem("auth")).bool&&"Scanner"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsxs)("div",{className:"scanner-db",children:[Object(u.jsxs)("div",{className:"scanner-info",children:[Object(u.jsx)("span",{className:"org",children:y.room}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{className:"username",children:y.username})]}),Object(u.jsxs)("div",{className:"scanner-wrapper",children:[Object(u.jsx)("span",{ref:S,children:"Ready to Scan"}),Object(u.jsx)(V.a,{onScan:function(e){null!==e&&!1===c&&(r(!0),function(e){k.apply(this,arguments)}(e))},facingmode:O,onError:function(e){console.log(e)},className:"scanner"}),Object(u.jsx)("div",{className:""})]}),Object(u.jsx)("div",{className:"select-wrapper",children:Object(u.jsx)("div",{className:"input-wrapper",children:Object(u.jsxs)("select",{className:"bg1",onChange:I,children:[Object(u.jsx)("option",{onChange:I,children:"Select Facing Mode"}),Object(u.jsx)("option",{value:"environment",children:"Front"}),Object(u.jsx)("option",{value:"user",children:"Rear"})]})})})]}):Object(u.jsx)(f.a,{to:"/"})};var U=function(e){var t=e.setLoadingClass,a=Object(n.useContext)(N),s=Object(i.a)(a,2),c=(s[0],s[1]),r=Object(n.useState)({}),l=Object(i.a)(r,2),o=l[0],j=l[1],d=Object(n.useRef)();function b(e){var t=e.target,a=t.name,n=t.value;j((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},a,n))}))}function x(){return(x=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t("loading-wrapper"),e.next=4,g.a.post("".concat(v.domain,"/room/signin"),o,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:3000"},withCredentials:!0});case 4:"OK"===e.sent.data.message?(t("hide"),localStorage.setItem("auth",JSON.stringify({bool:!0,role:"Scanner"})),c((function(e){return e+1}))):(t("hide"),d.current.style.display="inline"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t("hide"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return JSON.parse(localStorage.getItem("auth")).bool||"Scanner"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsx)(f.a,{to:"/org/Scanner"}):Object(u.jsx)("div",{className:"sign-in",children:Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsx)("div",{className:"form-title",children:Object(u.jsx)("span",{children:"QR Scanner"})}),Object(u.jsxs)("form",{className:"form-form",children:[Object(u.jsx)("span",{className:"error-message warn",ref:d,children:"Invalid username or password"}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Username"}),Object(u.jsx)("input",{type:"text",name:"username",className:"input signin-input bg1",onChange:b,required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",className:"input signin-input bg1",onChange:b,required:!0})]}),Object(u.jsx)("div",{className:"no-account"}),Object(u.jsx)("div",{className:"btn-wrapper",children:Object(u.jsx)("button",{type:"button",onClick:function(){return x.apply(this,arguments)},className:"btn blue-bg default-clr",children:"Sign In"})})]})]})})},K=Object(n.createContext)(),X=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),s=a[0],c=a[1];return Object(u.jsx)(K.Provider,{value:[s,c],children:e.children})};var W=function(e){var t=e.setLoadingClass,a=Object(n.useState)("form-wrapper fixed-pos default-bg hide"),s=Object(i.a)(a,2),c=s[0],r=s[1],l=Object(n.useState)("form-wrapper fixed-pos default-bg hide"),o=Object(i.a)(l,2),j=o[0],d=o[1],b=Object(n.useContext)(N),x=Object(i.a)(b,2),w=x[0],y=(x[1],Object(n.useContext)(K)),C=Object(i.a)(y,2),S=C[0],k=C[1],I=Object(n.useContext)(A),P=Object(i.a)(I,2),F=P[0],L=P[1],E=Object(n.useState)(""),J=Object(i.a)(E,2),D=J[0],q=J[1],T=Object(n.useState)({}),M=Object(i.a)(T,2),V=M[0],z=M[1],U=Object(n.useState)([]),X=Object(i.a)(U,2),W=X[0],Y=X[1],B=Object(n.useState)(""),G=Object(i.a)(B,2),Q=G[0],$=G[1],_=Object(n.useRef)();function Z(){r("form-wrapper fixed-pos default-bg hide"),te()}function H(){d("form-wrapper fixed-pos default-bg hide add-height"),te()}function ee(){_.current.style.opacity="0.2"}function te(){_.current.style.opacity="1"}function ae(e){var t=e.target,a=t.name,n=t.value;z((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},a,n))}))}function ne(){return(ne=Object(m.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t("loading-wrapper"),e.next=4,g.a.post("".concat(v.domain,"/room/createroom"),{room:D});case 4:n=e.sent,"OK"===n.data&&($(D),Z()),t("hide");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g.a.post("".concat(v.domain,"/room/signup"),V);case 3:a=e.sent,a.data,H();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=!0;function t(){return(t=Object(m.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat(v.domain,"/room/fetchrooms"));case 2:a=t.sent,n=a.data,e&&Y(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[Q]),Object(n.useEffect)((function(){}),[w]),S?Object(u.jsx)(f.a,{to:"/admin/reports"}):F?Object(u.jsx)(f.a,{to:"/admin/logs"}):JSON.parse(localStorage.getItem("auth")).bool&&"Admin"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"dashboard",ref:_,children:[Object(u.jsxs)("div",{className:"hero",children:[Object(u.jsx)("div",{className:"hero-text",children:Object(u.jsxs)("span",{className:"text",children:["Welcome ",Object(u.jsx)("br",{})," Admin"]})}),Object(u.jsx)("div",{className:"hero-image",children:Object(u.jsx)("img",{src:R,alt:"social_distance"})})]}),Object(u.jsxs)("div",{className:"db-menu",children:[Object(u.jsx)("div",{className:"menu-selection bg1",onClick:function(){k(!0)},children:Object(u.jsx)("span",{children:"View Reports"})}),Object(u.jsx)("div",{className:"menu-selection bg1",onClick:function(){L(!0)},children:Object(u.jsx)("span",{children:"View Logs"})}),Object(u.jsx)("div",{className:"menu-selection bg1",onClick:function(){r("form-wrapper fixed-pos default-bg"),ee()},children:Object(u.jsx)("span",{children:"Add Room"})}),Object(u.jsx)("div",{className:"menu-selection bg1",onClick:function(){d("form-wrapper fixed-pos default-bg add-height"),ee()},children:Object(u.jsx)("span",{children:"Scanner Account"})})]})]}),Object(u.jsxs)("div",{className:c,children:[Object(u.jsx)("div",{className:"form-title org-form-title",children:Object(u.jsx)("span",{children:"Create Room"})}),Object(u.jsxs)("form",{className:"form-form org-form",onSubmit:function(e){return ne.apply(this,arguments)},children:[Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"org",children:"Room Name"}),Object(u.jsx)("input",{type:"name",className:"input signin-input bg1",name:"room",onChange:function(e){q(e.target.value)},required:!0})]}),Object(u.jsxs)("div",{className:"btn-wrapper org-btn-wrapper",children:[Object(u.jsx)("button",{type:"submit",className:"btn blue-bg default-clr",children:"Create"}),Object(u.jsx)("button",{type:"button",className:"btn bg1",onClick:Z,children:"Cancel"})]})]})]}),Object(u.jsxs)("div",{className:j,children:[Object(u.jsx)("div",{className:"form-title org-form-title",children:Object(u.jsx)("span",{children:"Create Scanner Account"})}),Object(u.jsxs)("form",{className:"form-form org-form",onSubmit:function(e){return se.apply(this,arguments)},children:[Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"username",children:"Username"}),Object(u.jsx)("input",{type:"text",className:"input signin-input bg1",name:"username",onChange:ae,required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{type:"password",className:"input signin-input bg1",name:"password",onChange:ae,required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"org",children:"Room"}),Object(u.jsxs)("select",{className:"bg1",name:"room",onChange:ae,required:!0,children:[Object(u.jsx)("option",{value:"",children:"Select Organization"}),W.map((function(e){return Object(u.jsx)("option",{value:e.room,children:e.room},e._id)}))]})]}),Object(u.jsxs)("div",{className:"btn-wrapper org-btn-wrapper",children:[Object(u.jsx)("button",{type:"submit",className:"btn blue-bg default-clr",children:"Create"}),Object(u.jsx)("button",{type:"button",className:"btn bg1",onClick:H,children:"Cancel"})]})]})]})]}):Object(u.jsx)(f.a,{to:"/"})};var Y=function(e){var t=e.setLoadingClass,a=Object(n.useContext)(N),s=Object(i.a)(a,2),c=(s[0],s[1]),r=Object(n.useState)({}),l=Object(i.a)(r,2),o=l[0],j=l[1],d=Object(n.useRef)();function b(e){var t=e.target,a=t.name,n=t.value;j((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},a,n))}))}function x(){return(x=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t("loading-wrapper"),e.next=4,g.a.post("".concat(v.domain,"/admin/signin"),o,{headers:{"Content-Type":"application/json"},withCredentials:!0});case 4:"OK"===e.sent.data.message?(localStorage.setItem("auth",JSON.stringify({bool:!0,role:"Admin"})),c((function(e){return e+1})),t("hide")):(d.current.style.display="inline",t("hide")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t("hide"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return JSON.parse(localStorage.getItem("auth")).bool||"Admin"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsx)(f.a,{to:"/admin/dashboard"}):Object(u.jsx)("div",{className:"sign-in",children:Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsx)("div",{className:"form-title",children:Object(u.jsx)("span",{children:"Administrator"})}),Object(u.jsxs)("form",{className:"form-form",children:[Object(u.jsx)("span",{className:"error-message warn",ref:d,children:"Invalid username or password"}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Username"}),Object(u.jsx)("input",{type:"text",name:"username",className:"input signin-input bg1",onChange:b,required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"email",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",className:"input signin-input bg1",onChange:b,required:!0})]}),Object(u.jsx)("div",{className:"no-account"}),Object(u.jsx)("div",{className:"btn-wrapper",children:Object(u.jsx)("button",{type:"button",onClick:function(){return x.apply(this,arguments)},className:"btn blue-bg default-clr",children:"Sign In"})})]})]})})},B=a(22);function G(e){var t=e.log,a=e.user,s=e.setLastReported,c=e.setLoadingClass,r=Object(n.useState)({}),l=Object(i.a)(r,2),o=(l[0],l[1]),j=Object(n.useState)("report-modal bg1 hide"),d=Object(i.a)(j,2),b=d[0],O=d[1];function h(){return(h=Object(m.a)(p.a.mark((function e(){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:a.id,name:a.name,logId:t.id,location:t.location,time:"".concat(t.day,", ").concat(t.time,", ").concat(t.month)},c("loading-wrapper"),e.next=5,g.a.post("".concat(v.domain,"/client/report"),n);case 5:r=e.sent,"OK"===r.data&&c("hide"),s(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),c("hide"),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){JSON.parse(localStorage.getItem("auth")).bool&&"Client"===JSON.parse(localStorage.getItem("auth")).role&&o(t)}),[]),t.isReported?Object(u.jsxs)("li",{className:"travel-log-list bg1",children:[Object(u.jsx)("span",{className:"location",children:t.location}),Object(u.jsx)("span",{className:"time",children:"".concat(t.day,", ").concat(t.time,", ").concat(t.month)}),Object(u.jsx)("span",{className:"warn",children:"Report had been sent."})]}):Object(u.jsxs)("li",{className:"travel-log-list bg1",children:[Object(u.jsx)("span",{className:"location",children:t.location}),Object(u.jsx)("span",{className:"time",children:"".concat(t.day,", ").concat(t.time,", ").concat(t.month)}),Object(u.jsx)("span",{className:"not-me warn light",onClick:function(){O("report-modal bg1")},children:"Report"}),Object(u.jsxs)("div",{className:b,children:[Object(u.jsx)("div",{className:"report-modal-header warn-bg",children:Object(u.jsx)("span",{className:"default-clr",children:"Confirmation"})}),Object(u.jsxs)("div",{className:"report-prompt",children:[Object(u.jsx)("span",{className:"report-message",children:"Are you sure, you want to report this is activity?"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"confirm modal-btn warn",onClick:function(){return h.apply(this,arguments)},children:"Confirm"}),Object(u.jsx)("span",{className:"cancel modal-btn  ok-text",onClick:function(){O("report-modal bg1 hide")},children:"Cancel"})]})]})]})]})}var Q=function(e){var t=e.setLoadingClass,a=Object(n.useContext)(L),s=Object(i.a)(a,2),c=s[0],r=(s[1],Object(n.useContext)(N)),l=Object(i.a)(r,2),o=(l[0],l[1],Object(n.useContext)(A)),j=Object(i.a)(o,2),d=j[0],b=j[1],O=Object(n.useState)({}),h=Object(i.a)(O,2),x=h[0],w=h[1],y=Object(n.useState)([]),C=Object(i.a)(y,2),S=C[0],k=C[1];return Object(n.useEffect)((function(){var e=!0;function a(){return(a=Object(m.a)(p.a.mark((function a(){var n,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t("loading-wrapper"),a.prev=1,a.next=4,g.a.post("".concat(v.domain,"/client/fetchlogs"),JSON.parse(localStorage.getItem("userId")));case 4:n=a.sent,s=n.data,t("hide loading-wrapper"),e&&k(s),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e=!1}}),[x]),d?JSON.parse(localStorage.getItem("auth")).bool&&"Client"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"back-buttons"}),Object(u.jsxs)("div",{className:"travel-logs",children:[Object(u.jsxs)("div",{className:"title-wrapper",children:[Object(u.jsx)("span",{className:"title-text",children:"Travel Logs"}),Object(u.jsx)("span",{className:"back-btn blue-clr",onClick:function(){b(!1)},children:Object(u.jsx)(B.a,{})})]}),Object(u.jsx)("div",{className:"travel-logs-wrapper",children:Object(u.jsx)("ul",{className:"travel-log-lists",children:S.map((function(e,a){return Object(u.jsx)(G,{log:e,setLastReported:w,user:c,setLoadingClass:t},a)}))})})]})]}):Object(u.jsx)(f.a,{to:"/"}):Object(u.jsx)(f.a,{to:"/dashboard"})},$=(a(119),a(27));var _=function(e){var t=Object(n.useContext)(N),a=Object(i.a)(t,2),s=(a[0],a[1]);function c(){return(c=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(v.domain,"/logout"),{},{withCredentials:!0});case 2:t=e.sent,t.data,localStorage.setItem("auth",JSON.stringify({bool:!1,role:"NONE"})),localStorage.removeItem("userId"),s((function(e){return e+1}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsx)("header",{className:"nav-header",children:Object(u.jsx)("div",{className:"logout",children:Object(u.jsx)("span",{className:"default-clr",onClick:function(){return c.apply(this,arguments)},children:Object(u.jsx)($.b,{})})})})};function Z(e){var t=e.report;return Object(u.jsx)("li",{children:Object(u.jsxs)("details",{children:[Object(u.jsx)("summary",{className:"report-summary",children:"".concat(t.reporter," reported an activity")}),Object(u.jsx)("p",{className:"summary-text warn",children:t.reportText})]})})}var H=function(e){var t=e.setLoadingClass,a=Object(n.useState)([]),s=Object(i.a)(a,2),c=s[0],r=s[1],l=Object(n.useContext)(K),o=Object(i.a)(l,2),j=o[0],d=o[1];return Object(n.useEffect)((function(){var e=!0;function a(){return(a=Object(m.a)(p.a.mark((function a(){var n,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t("loading-wrapper"),a.next=3,g.a.post("".concat(v.domain,"/admin/reports"),{});case 3:n=a.sent,s=n.data,t("hide"),e&&r(s);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e=!1}}),[]),j?JSON.parse(localStorage.getItem("auth")).bool&&"Admin"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsxs)("div",{className:"reports",children:[Object(u.jsxs)("div",{className:"title-wrapper",children:[Object(u.jsx)("span",{className:"title-text",children:"Reports"}),Object(u.jsx)("span",{className:"back-btn blue-clr",onClick:function(){d(!1)},children:Object(u.jsx)(B.a,{})})]}),Object(u.jsx)("div",{className:"all-reports",children:Object(u.jsx)("ul",{children:c.map((function(e,t){return Object(u.jsx)(Z,{report:e},t)}))})})]}):Object(u.jsx)(f.a,{to:"/dashboard"}):Object(u.jsx)(f.a,{to:"/admin/dashboard"})};function ee(e,t){var a="2px solid #6BD382",n="NONE";Array.isArray(e)?e.forEach((function(e){e.style.outline=a})):e.target.style.outline=a,t.current.style.display=n}function te(e,t){var a="2px solid #db5248",n="inline";Array.isArray(e)?e.forEach((function(e){e.style.outline=a})):e.target.style.outline=a,t.current.style.display=n}function ae(e){var t=e.Class,a=e.setGeneralInfoModal,s=e.fetchSession,c=(e.user,Object(n.useState)(JSON.parse(localStorage.getItem("userId")))),r=Object(i.a)(c,2),l=r[0],o=r[1],j=Object(n.useState)([]),d=Object(i.a)(j,2),b=d[0],f=d[1],x=Object(n.useState)([]),N=Object(i.a)(x,2),w=N[0],y=N[1],C=Object(n.useRef)();function S(e){var t=e.target,a=t.name,n=t.value;o((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},a,n))}))}function k(){return(k=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g.a.patch("".concat(v.domain,"/client/updategeneral"),l,{withCredentials:!0});case 3:a=e.sent,a.data,I(),s((function(e){return e+1}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){a("hide max profile-modal")}function P(){return(P=Object(m.a)(p.a.mark((function e(t){var a,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=function(){return(s=Object(m.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(v.domain,"/philippines/provinces/cities/").concat(a));case 2:n=e.sent,y(n.data),S(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},n=function(){return s.apply(this,arguments)},a=t.target.value,n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(v.domain,"/philippines/provinces"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){f(e.data)}))}),[]),Object(u.jsxs)("div",{className:t,children:[Object(u.jsx)("div",{className:"form-title org-form-title",children:Object(u.jsx)("span",{children:"Edit General Info"})}),Object(u.jsxs)("form",{className:"form-form org-form",onSubmit:function(e){return k.apply(this,arguments)},children:[Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"name",children:"Fullname"}),Object(u.jsx)("input",{type:"name",className:"input signin-input bg1",name:"fullname",onChange:S,required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"Province",children:"Province"}),Object(u.jsxs)("select",{className:"bg1",name:"province",onChange:function(e){return P.apply(this,arguments)},required:!0,children:[Object(u.jsx)("option",{value:"",children:"Select Province"}),b.map((function(e){return Object(u.jsx)("option",{value:e.name,children:e.name},e.key)}))]})]}),Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"Province",children:"City"}),Object(u.jsx)("select",{className:"bg1",ref:C,name:"city",onChange:S,required:!0,children:w.map((function(e,t){return Object(u.jsx)("option",{value:e.name+" City",children:e.name+" City"},t)}))})]}),Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"address",children:"Detailed address"}),Object(u.jsx)("textarea",{className:"bg1",onChange:S,name:"fullAddress",required:!0})]}),Object(u.jsxs)("div",{className:"btn-wrapper org-btn-wrapper",children:[Object(u.jsx)("button",{type:"submit",className:"btn blue-bg default-clr btn-font-size",children:"Save"}),Object(u.jsx)("button",{type:"button",onClick:I,className:"btn bg1 btn-font-size",children:"Cancel"})]})]})]})}function ne(e){var t=e.user,a=e.fetchSession,s=e.setMobileInfoModal,c=e.mobileInfoModalClass,r=Object(n.useState)(1),l=Object(i.a)(r,2),o=l[0],j=l[1],d=Object(n.useState)(!1),b=Object(i.a)(d,2),O=b[0],h=b[1],f=Object(n.useState)(),x=Object(i.a)(f,2),N=x[0],w=x[1],y=Object(n.useState)(),C=Object(i.a)(y,2),S=C[0],k=C[1],I=Object(n.useRef)(),P=Object(n.useRef)(),F=Object(n.useRef)();function R(){s("show max profile-modal modal-height")}function L(){return(L=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,"^(09|\\+639)\\d{9}$",!a.match("^(09|\\+639)\\d{9}$")){e.next=11;break}return h(!0),ee(t,I),e.next=7,g.a.post("".concat(v.domain,"/validateMobileNumberIfTaken"),{mobileNumber:a});case 7:e.sent.data&&te(t,I),e.next=14;break;case 11:h(!1),te(t,I),t.target.value.length>11&&(n=t.target.value.substring(0,11),t.target.value=n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=6;break}return e.next=3,g.a.post("".concat(v.domain,"/createVerification"),{mobileNumber:N});case 3:t=e.sent,t.data,j((function(e){return e+1}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){var a="2px solid #db5248",n="inline";Array.isArray(e)?e.forEach((function(e){e.style.outline=a})):e.style.outline=a,t.current.style.display=n}function J(){return(J=Object(m.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),g.a.post("".concat(v.domain,"/verify"),{code:S,mobileNumber:N}).then(function(){var e=Object(m.a)(p.a.mark((function e(n){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("VERIFIED"!==n.data){e.next=9;break}return e.next=3,g.a.put("".concat(v.domain,"/client/newmobile"),{id:t.id,mobileNumber:N},{withCredentials:!0});case 3:s=e.sent,s.data,a((function(e){return e+1})),R(),e.next=10;break;case 9:A(F.current,P);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){s("hide max profile-modal modal-height")}return 1===o?Object(u.jsxs)("div",{className:c,children:[Object(u.jsx)("div",{className:"form-title org-form-title",children:Object(u.jsx)("span",{children:"New Mobile Number"})}),Object(u.jsxs)("form",{className:"form-form org-form",children:[Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"name",children:"Enter New Mobile Number"}),Object(u.jsx)("span",{className:"error-message",ref:I,children:"Invalid mobile number"}),Object(u.jsx)("input",{type:"number",className:"input signin-input bg1",name:"mobileNumber",onChange:function(e){w(e.target.value)},onInput:function(e){return L.apply(this,arguments)},required:!0})]}),Object(u.jsxs)("div",{className:"btn-wrapper org-btn-wrapper",children:[Object(u.jsx)("button",{type:"button",className:"btn blue-bg default-clr btn-font-size",onClick:function(){return E.apply(this,arguments)},children:"Next"}),Object(u.jsx)("button",{type:"button",className:"btn bg1 btn-font-size",onClick:R,children:"Cancel"})]})]})]}):Object(u.jsxs)("div",{className:c,children:[Object(u.jsx)("div",{className:"form-title org-form-title",children:Object(u.jsx)("span",{children:"Confirmation"})}),Object(u.jsxs)("form",{className:"form-form org-form",onSubmit:function(e){return J.apply(this,arguments)},children:[Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("span",{className:"error-message",ref:P,children:"Invalid code"}),Object(u.jsx)("label",{className:"",htmlFor:"name",children:"Enter 6 - Digit Code"}),Object(u.jsx)("input",{type:"number",className:"input signin-input bg1",name:"mobileNumber",ref:F,onChange:function(e){k(e.target.value)},onInput:function(e){var t=e.target;t.value.length>6&&(t.value=t.value.substring(0,6))},required:!0})]}),Object(u.jsxs)("div",{className:"btn-wrapper org-btn-wrapper",children:[Object(u.jsx)("button",{type:"submit",className:"btn blue-bg default-clr btn-font-size",children:"Confirm"}),Object(u.jsx)("button",{type:"button",className:"btn bg1 btn-font-size",onClick:R,children:"Cancel"})]})]})]})}function se(e){var t=e.Class,a=e.setPasswordInfoModal,s=e.user,c=Object(n.useState)({isOldPasswordCorrect:!1,isNewPasswordValid:!1}),r=Object(i.a)(c,2),l=r[0],o=r[1],j=Object(n.useState)(),d=Object(i.a)(j,2),b=d[0],O=d[1],f=Object(n.useState)(),x=Object(i.a)(f,2),N=x[0],w=x[1],y=Object(n.useRef)(),C=Object(n.useRef)(),S=Object(n.useRef)();function k(){a("hide max profile-modal modal-height")}var I=Object(n.useRef)();function P(){return(P=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(v.domain,"/client/password"),{id:s.id,password:b});case 2:a=e.sent,"OK"===a.data?(o((function(e){return Object(h.a)(Object(h.a)({},e),{},{isOldPasswordCorrect:!0})})),ee(t,S)):(o((function(e){return Object(h.a)(Object(h.a)({},e),{},{isOldPasswordCorrect:!1})})),te(t,S));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.isNewPasswordValid||!l.isOldPasswordCorrect){e.next=7;break}return e.next=4,g.a.post("".concat(v.domain,"/client/savepassword"),{id:s.id,password:N});case 4:a=e.sent,"OK"===a.data&&k();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)("div",{className:t,children:[Object(u.jsx)("div",{className:"form-title org-form-title",children:Object(u.jsx)("span",{children:"Change Password"})}),Object(u.jsxs)("form",{className:"form-form org-form",onSubmit:function(e){return F.apply(this,arguments)},children:[Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("span",{className:"error-message",ref:S,children:"Incorrect Password."}),Object(u.jsx)("label",{className:"",htmlFor:"name",children:"Old Password"}),Object(u.jsx)("input",{type:"password",className:"input signin-input bg1",onChange:function(e){O(e.target.value)},onBlur:function(e){return P.apply(this,arguments)},name:"old",required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("span",{className:"error-message",ref:y,children:"Password must be atleast 8 characters or longer."}),Object(u.jsx)("span",{className:"error-message",ref:C,children:"Passwords are not the same."}),Object(u.jsx)("label",{className:"",htmlFor:"name",children:"New Password"}),Object(u.jsx)("input",{type:"password",className:"input signin-input bg1",name:"newPassword",onChange:function(e){w(e.target.value)},ref:I,onInput:function(e){e.target.value.length>=8?(ee(e,y),o((function(e){return Object(h.a)(Object(h.a)({},e),{},{isNewPasswordValid:!0})}))):(te(e,y),o((function(e){return Object(h.a)(Object(h.a)({},e),{},{isNewPasswordValid:!1})})))},required:!0})]}),Object(u.jsxs)("div",{className:"input-wrapper org-input-wrapper",children:[Object(u.jsx)("label",{className:"",htmlFor:"name",children:"Confirm New Password"}),Object(u.jsx)("input",{type:"password",className:"input signin-input bg1",name:"confirmPass",onInput:function(e){var t=e.target,a=[t,I.current];I.current.value===t.value?(ee(a,C),o((function(e){return Object(h.a)(Object(h.a)({},e),{},{isNewPasswordValid:!0})}))):(te(a,C),o((function(e){return Object(h.a)(Object(h.a)({},e),{},{isNewPasswordValid:!1})})))},required:!0})]}),Object(u.jsxs)("div",{className:"btn-wrapper org-btn-wrapper",children:[Object(u.jsx)("button",{type:"submit",className:"btn blue-bg default-clr btn-font-size",children:"Save"}),Object(u.jsx)("button",{type:"button",onClick:k,className:"btn bg1 btn-font-size",children:"Cancel"})]})]})]})}var ce=function(){var e=Object(n.useContext)(L),t=Object(i.a)(e,2),a=t[0],s=(t[1],Object(n.useContext)(N)),c=Object(i.a)(s,2),r=(c[0],c[1]),l=Object(n.useState)("hide max profile-modal"),o=Object(i.a)(l,2),j=o[0],d=o[1],b=Object(n.useState)("hide max profile-modal modal-height"),p=Object(i.a)(b,2),m=p[0],O=p[1],h=Object(n.useState)("hide max profile-modal modal-height"),x=Object(i.a)(h,2),g=x[0],v=x[1],w=Object(n.useContext)(D),y=Object(i.a)(w,2),C=y[0],S=y[1];return C?JSON.parse(localStorage.getItem("auth")).bool&&"Client"===JSON.parse(localStorage.getItem("auth")).role?Object(u.jsxs)("div",{className:"profile-wrapper",children:[Object(u.jsxs)("div",{className:"travel-logs profile",children:[Object(u.jsxs)("div",{className:"title-wrapper",children:[Object(u.jsx)("span",{className:"title-text",children:"Profile"}),Object(u.jsx)("span",{className:"back-btn blue-clr",onClick:function(){S(!1)},children:Object(u.jsx)(B.a,{})})]}),Object(u.jsxs)("div",{className:"user-details",children:[Object(u.jsxs)("div",{className:"general-info bg1",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"General"}),Object(u.jsx)("span",{children:a.name}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"inline",children:a.province+", "}),Object(u.jsx)("span",{className:"inline",children:a.city})]}),Object(u.jsx)("span",{children:a.fullAddress})]}),Object(u.jsx)("div",{className:"edit-wrapper",children:Object(u.jsx)("span",{className:"inline ",onClick:function(){d("show max profile-modal")},children:Object(u.jsx)($.a,{})})})]}),Object(u.jsxs)("div",{className:"important-info bg1",children:[Object(u.jsxs)("div",{className:"info-wrapper",children:[Object(u.jsx)("label",{children:"Mobile #"}),Object(u.jsx)("span",{className:"important",children:a.mobileNumber})]}),Object(u.jsx)("div",{className:"edit-wrapper",children:Object(u.jsx)("span",{className:"inline ",onClick:function(){O("show max profile-modal modal-height")},children:Object(u.jsx)($.a,{})})})]}),Object(u.jsxs)("div",{className:"important-info bg1",children:[Object(u.jsxs)("div",{className:"info-wrapper",children:[Object(u.jsx)("label",{children:"Password"}),Object(u.jsx)("span",{className:"important",children:"Change Password"})]}),Object(u.jsx)("div",{className:"edit-wrapper",children:Object(u.jsx)("span",{className:"inline",onClick:function(){v("show max profile-modal modal-height")},children:Object(u.jsx)($.a,{})})})]})]})]}),Object(u.jsx)(ae,{Class:j,user:a,fetchSession:r,setGeneralInfoModal:d}),Object(u.jsx)(ne,{user:a,fetchSession:r,mobileInfoModalClass:m,setMobileInfoModal:O}),Object(u.jsx)(se,{user:a,Class:g,setPasswordInfoModal:v})]}):Object(u.jsx)(f.a,{to:"/"}):Object(u.jsx)(f.a,{to:"/dashboard"})},re=(a(120),a(121),a(79)),ie=a.n(re);a(122);function le(e){var t=e.log;e.user,e.setLastReported;return Object(u.jsx)("li",{className:"admin-logs-list",children:Object(u.jsxs)("details",{className:"admin-log-list",children:[Object(u.jsx)("summary",{className:"report-summary",children:t.name}),Object(u.jsx)("span",{className:"summary-text time ok-text",children:"User ID : "+t.userId}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{className:"summary-text time ok-text",children:"Contact #: "+t.mobileNumber}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{className:"summary-text time ok-text",children:"".concat(t.day,", ").concat(t.time,", ").concat(t.month," - ").concat(t.location)})]})})}var oe=function(e){var t=e.setLoadingClass,a=Object(n.useState)([]),s=Object(i.a)(a,2),c=s[0],r=s[1],l=Object(n.useContext)(A),o=Object(i.a)(l,2),j=o[0],d=o[1],b=Object(n.useState)([]),O=Object(i.a)(b,2),h=O[0],x=O[1],N=Object(n.useState)(new Date),w=Object(i.a)(N,2),y=w[0],C=w[1],S=Object(n.useState)(""),k=Object(i.a)(S,2),I=k[0],P=k[1];return Object(n.useEffect)((function(){var e=!0;function a(){return(a=Object(m.a)(p.a.mark((function a(){var n,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t("loading-wrapper"),a.prev=1,a.next=4,g.a.post("".concat(v.domain,"/admin/logs"),{});case 4:n=a.sent,s=n.data,t("hide"),e&&r(s),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}function n(){return(n=Object(m.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat(v.domain,"/room/fetchrooms"));case 2:a=t.sent,n=a.data,e&&x(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){n.apply(this,arguments)}(),function(){e=!1}}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(v.domain,"/admin/logs/").concat(y,"/").concat(I),{});case 2:t=e.sent,(a=t.data).length>0&&r(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}I.length>0&&function(){e.apply(this,arguments)}()}),[I]),j?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"back-buttons"}),Object(u.jsxs)("div",{className:"travel-logs",children:[Object(u.jsxs)("div",{className:"title-wrapper",children:[Object(u.jsx)("span",{className:"title-text",children:"Student Logs"}),Object(u.jsx)("span",{className:"back-btn blue-clr",onClick:function(){d(!1)},children:Object(u.jsx)(B.a,{})})]}),Object(u.jsxs)("div",{className:"filters",children:[Object(u.jsx)("label",{children:"Filters"}),Object(u.jsx)(ie.a,{selected:y,onChange:function(e){C(e)},className:"date-picker bg1"}),Object(u.jsx)("div",{className:"input-wrapper",children:Object(u.jsxs)("select",{className:"bg1",name:"Room",onChange:function(e){P(e.target.value)},children:[Object(u.jsx)("option",{children:"Select room"}),h.map((function(e){return Object(u.jsx)("option",{value:e.room,children:e.room},e._id)}))]})})]}),Object(u.jsx)("div",{className:"all-reports",children:Object(u.jsx)("ul",{className:"travel-log-lists admin-logs",children:c.map((function(e,t){return Object(u.jsx)(le,{log:e},t)}))})})]})]}):Object(u.jsx)(f.a,{to:"/admin/dashboard"})},je=a.p+"static/media/loading.238bc502.svg";var ue=function(e){var t=e.Class;return Object(u.jsx)("div",{className:t,children:Object(u.jsx)("img",{src:je,alt:"loading"})})};var de=function(){null===localStorage.getItem("auth")&&(console.log("FIRST RUN"),localStorage.setItem("auth",JSON.stringify({bool:!1,role:"none"})),localStorage.setItem("userId",JSON.stringify({id:""})));var e=Object(n.useState)("hide"),t=Object(i.a)(e,2),a=t[0],s=t[1];return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(j.a,{children:[Object(u.jsx)(ue,{Class:a}),Object(u.jsx)(f.d,{children:Object(u.jsx)(w,{children:Object(u.jsxs)(E,{children:[Object(u.jsx)(J,{children:Object(u.jsxs)(q,{children:[Object(u.jsxs)(f.d,{children:[Object(u.jsx)(f.b,{path:"/signin",children:Object(u.jsx)(y,{setLoadingClass:s})}),Object(u.jsx)(f.b,{path:"/signup",children:Object(u.jsx)(I,{setLoadingClass:s})}),Object(u.jsx)(f.b,{path:"/",exact:!0,component:d})]}),Object(u.jsxs)(f.d,{children:[Object(u.jsx)(f.b,{path:"/dashboard/logs",children:Object(u.jsx)(Q,{setLoadingClass:s})}),Object(u.jsx)(f.b,{path:"/dashboard/profile",children:Object(u.jsx)(ce,{setLoadingClass:s})}),Object(u.jsxs)(f.b,{path:"/dashboard",children:[Object(u.jsx)(_,{}),Object(u.jsx)(T,{setLoadingClass:s})]})]})]})}),Object(u.jsxs)(f.d,{children:[Object(u.jsxs)(f.b,{path:"/org/scanner",children:[Object(u.jsx)(_,{}),Object(u.jsx)(z,{setLoadingClass:s})]}),Object(u.jsx)(f.b,{path:"/org",children:Object(u.jsx)(U,{setLoadingClass:s})})]}),Object(u.jsx)(f.d,{children:Object(u.jsx)(X,{children:Object(u.jsxs)(J,{children:[Object(u.jsx)(f.b,{path:"/admin/reports",children:Object(u.jsx)(H,{setLoadingClass:s})}),Object(u.jsxs)(f.b,{path:"/admin/dashboard",children:[Object(u.jsx)(_,{}),Object(u.jsx)(W,{setLoadingClass:s})]}),Object(u.jsx)(f.b,{path:"/admin/logs",children:Object(u.jsx)(oe,{setLoadingClass:s})}),Object(u.jsx)(f.b,{path:"/admin",children:Object(u.jsx)(Y,{setLoadingClass:s})})]})})})]})})})]})})},be=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,198)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(de,{})}),document.getElementById("root")),be()},47:function(e,t,a){},85:function(e,t,a){}},[[195,1,2]]]);
//# sourceMappingURL=main.1fee428f.chunk.js.map